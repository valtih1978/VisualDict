<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"
"http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <title>Google Drive Realtime quickstart</title>
  <meta http-equiv="X-UA-Compatible" content="IE=9">
  <script type="text/javascript" src="https://apis.google.com/js/api.js"></script>
  <script type="text/javascript" src="realtime-client-utils.js"></script>
  
  <script>
	function aval() {return document.querySelector("#a_complex_id").value.trim()} ;
	function bval() {return document.querySelector("#b_complex_id").value.trim()} ;
	
	
	// called by controller.js
	function onFileLoaded(doc) {}
	function printAll() { 
		var keys = graph.keys() ; document.querySelector("#textarea1").value = ""
		for (i in keys) {
			console.log(keys[i] + " => " + graph.get(keys[i]))
			document.querySelector("#textarea1").value += keys[i] + " => " + graph.get(keys[i]) + "\n"
		}
	}

  </script>

  <script type="text/javascript" src="controller.js"></script>
</head>

<!-- Start Realtime when the body has loaded. -->
<body onLoad='startRealtime()'>

  <button id="authorizeButton" disabled>You must authorize</button>
  <button id="pick" onclick="pick()">Pick another file</button>
  <!-- Undo and redo buttons. -->
  <button id="undoButton" disabled>Undo</button>
  <button id="redoButton" disabled>Redo</button>
<p>
  <button onclick="createNode(validateName(aval()))">New Node</button>
  <button onclick="deleteNode()">Delete Node</button>
  <button onclick="renameNode()">Rename Node</button>
  <button onclick="connectSpecified(aval(), bval())">Connect</button> 
  <button onclick="disconnectNodes()">Disconnect</button>
  <input id="a_complex_id" size="4"/><input id="b_complex_id" size="4"/>
	<button onclick="printAll()">Show all</button>
	<p>
	<table><tr><td>
	<textarea id="textarea1" disabled rows=7 align="right"></textarea>
	</td>
		<td><li>	Edit the graph using the buttons. 
	Thanks to Google Drive Realtime API, you can <a target="_blank" href="#">do it collaboratively.</a> 
	This might be an overkill but I will exploit it for graphical edit. </li><li>
	<a href="javascript:window.open('cytoscape.html' + location.hash)">Cytoscape</a> loads 
	realtime data but fails to make connections. Cytoscape seems good visualizer but unsatisfactory editor.</li><li>
	<a href="javascript:window.open('graph-creator.html' + location.hash)">Graph Creator</a> 
	Thoug it does support "make connections" facility, it does not support automatic layout and
	Integration with Realtime Model was not even started.</li>
		</td>	</tr>
	</table>
  
</body>
</html>